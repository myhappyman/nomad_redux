# Nomad Redux

reduxê°œë…ì„ ì¢€ ë” í™•ì‹¤í•˜ê²Œ ì¡ê¸°ìœ„í•´ ì¶”ê°€ ê°•ì˜ë¥¼ í•™ìŠµ ì¤‘.
ê°•ì˜ ì œê³µì€ jsì´ì§€ë§Œ ìµœëŒ€í•œ typescriptë¥¼ ë°”ë¡œ ì ìš©í•˜ì—¬ í™œìš©í•˜ê³  ì—°ìŠµí•œë‹¤.

# Redux

reactì— ëŒ€í•œ ê°œë…ë³´ë‹¨ reduxì— ëŒ€í•œ ê°œë…ì„ ìµíˆê³  ì¶”í›„ ì–´ë–¤ ì–¸ì–´ì—ì„œë“  reduxë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•™ìŠµí•œë‹¤.

## 1.1 Store and Reducer

### ğŸ”¹store

`redux`ì—ì„œ `createStore`ë©”ì†Œë“œë¥¼ ì“¸ ìˆ˜ ìˆëŠ”ë°, ì´ê²ƒì€ ë¬´ì—‡ì¼ê¹Œ?
ë¨¼ì € `store`ë¼ëŠ” ê°œë…ì„ ì•Œì•„ì•¼í•œë‹¤.
`store`ëŠ” ë°ì´í„°ë¥¼ ë„£ëŠ” ê³µê°„ìœ¼ë¡œ `state`ë¥¼ ë„£ëŠ”ë‹¤ê³  ë³´ë©´ ëœë‹¤.
`createStore`ëŠ” `reducer`ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ìš”êµ¬í•œë‹¤.
ê²°ê³¼ê°’ì€ `getState()`ë©”ì†Œë“œë¥¼ í†µí•´ ì¶œë ¥ í•  ìˆ˜ ìˆë‹¤.

ps. reduxì—ì„œ createStoreëŠ” deprecateì²˜ë¦¬ë˜ì–´ ìˆì§€ë§Œ, ê·¸ëƒ¥ ì‚¬ìš©í•´ë„ ë¬´ê´€í•˜ë©° legacy_createStoreë¥¼ as createStoreë¼ê³  ëª…ëª…í•˜ê³  ì‚¬ìš©í•˜ë©´ ì·¨ì†Œì„  ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### ğŸ”¹reducer

`reducer`ëŠ” `state`ë¥¼ ë³€ê²½ ì‹œí‚¤ëŠ” ë©”ì†Œë“œë¡œ ì‚¬ìš©ìê°€ ì‘ì„±í•˜ëŠ” í™˜ê²½ì— ë§ì¶° `state`ê°’ë“¤ì„ ë³€ê²½í•œë‹¤. ì—¬ê¸°ì„œ ì •ìˆ˜í˜•ì˜ ê°’ì„ ë³€ê²½í•˜ê±°ë‚˜ array, objectë“± ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì´ê³³ì—ì„œë§Œ ë³€ê²½í•˜ë©°, ë³€ê²½í•˜ëŠ” ê°’ì€ `action`ì´ë¼ëŠ” í‚¤ì›Œë“œë¥¼ í†µí•´ êµ¬ë¶„í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.
`reducer`ì˜ ì—°ì‚°ì´ ëë‚˜ê³  returní•˜ëŠ” ê°’ì´ í˜„ì¬ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ `state`ê°’ì´ ë˜ë©° `store`ì— ë“±ë¡ëœë‹¤.

### ğŸ”¹state

ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°”ë€ŒëŠ” dataë“¤ì„ `state`ë¼ê³  ì·¨ê¸‰í•œë‹¤.
ì¹´ìš´íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ countì™€ ê°™ì€ ì¦ê°€í•˜ê±°ë‚˜ ê°ì†Œí•˜ëŠ” ì •ìˆ˜ê°’ë“¤ì„ ì˜ë¯¸í•œë‹¤.

### ğŸ”¹action

`store`ì— ë“±ë¡í•˜ëŠ” `reducer`ë¥¼ ì†Œí†µí•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ `action`ì„ ì‚¬ìš©í•œë‹¤.
`action`ì€ typeì´ë¼ëŠ” keyë¥¼ í•„ìˆ˜ë¡œ ê°’ëŠ” Objectí˜•íƒœì˜ ë°ì´í„°ë‹¤.
`action`ì€ ê·¸ëŸ¼ `reducer`ì— ì–´ë–»ê²Œ ë³´ë‚´ì§ˆê¹Œ? `dispatch`ë©”ì†Œë“œë¥¼ í™œìš©í•œë‹¤.
`dispatch`ëŠ” `store`ì—ì„œ ì œê³µí•˜ëŠ” ë©”ì†Œë“œë¡œ `reducer`ë¥¼ ë™ì‘ì‹œí‚¤ê²Œ ë§Œë“ ë‹¤.

```js
store.dispatch({ type: "INCREASE" });
```

### ğŸ”¹dispatch

storeë‚´ì¥ ë©”ì†Œë“œë¡œ reducerë¥¼ ë™ì‘ì‹œí‚¤ë©´ì„œ actionì˜ ê°’ì„ ì „ë‹¬í•œë‹¤.
(actionì€ typeì´ë¼ëŠ” keyë¥¼ ê¼­ ê°€ì§€ë„ë¡ ì‘ì„±í•´ì•¼í•˜ê³  objectí˜•íƒœë¡œ êµ¬ì„±ëœë‹¤.)

### ğŸ”¹subscribe

storeì— ë“±ë¡ëœ stateê°€ ë³€í™”ê°€ ìƒê¸°ë©´ ì•Œë ¤ì¤€ë‹¤.
ë‚´ë¶€ì— ë“±ë¡í•œ ì½œë°±ì„ ë™ì‘ì‹œì¼œì¤€ë‹¤.

## 1.4 Recap

`action`ì˜ typeë“¤ì„ ìƒìˆ˜ë¡œ ì„¤ì •í•˜ê³  ëŒ€ë¬¸ìë¡œ ì‘ì„±í•œë‹¤.
ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ë‹¤.
`reducer`ì˜ action.typeì€ switch caseë¬¸ì„ ê¶Œì¥í•œë‹¤.
(typeì˜ ì¢…ë¥˜ê°€ ë§ì•„ì§€ëŠ” ê²½ìš° ê°€ë…ì„±ì„ ìœ„í•˜ì—¬ ê¶Œì¥)

## 2.0 Vanilla ToDos

vanilla todosë¥¼ reduxë¡œ ì‘ì„±í•´ë³¸ë‹¤.
ì´ì „ì— ë°°ìš´ action, actioní•¨ìˆ˜, `reducer`, `store`ë¥¼ ì‘ì„±í•˜ê³  ì—°ê²°í•˜ì—¬ ê°€ë³ê²Œ todo insertë™ì‘ê¹Œì§€ ì‘ì„±í•˜ì˜€ë‹¤.

`reducer`ì˜ return state ë¶€ë¶„ì„ ì‘ì„±í• ë• ê¼­ `mutate`ì²˜ë¦¬ê°€ ë˜ì§€ ì•Šë„ë¡ ì¡°ì‹¬í•´ì•¼í•œë‹¤. ex) `arr.push`ëŠ” ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. `[...state, "add"]`

## 2.1 State Mutation

reduxì˜ ê³µì‹ë¬¸ì„œë¥¼ ë³´ë©´ `state`ëŠ” `read-only`ì´ë‹¤.
ë˜í•œ `Single source of truth`ì´ë‹¤.
ì¦‰, `store.getState()+1`ê°™ì€ í–‰ìœ„ëŠ” í•˜ë©´ ì•ˆëœë‹¤. ì˜¤ë¡œì§€ `reducer`ì—ì„œ `action` êµ¬ë¶„ê°’ì— ë§ì¶°ì„œ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ì§€ëŠ” ì•½ì†ì„ ì§€ì¼œì•¼í•œë‹¤.

`Single source of truth`: ì—¬ëŸ¬ ê³³ì—ì„œ ê°™ì€ ê°’ì´ ì‚¬ìš©ë  ë•Œ í•œ ê³³ì—ì„œ ì²˜ë¦¬í•˜ê³  ìˆ˜ì •í•˜ë„ë¡ ì‘ì„±í•˜ì—¬ ë””ë²„ê¹…ì´ë‚˜ ìœ ì§€ë³´ìˆ˜ì„±ì„ ëŠ˜ë¦¬ëŠ” í–‰ìœ„ë¥¼ ë§í•œë‹¤. í•œê¸€ë¡œ ë²ˆì—­í•˜ë©´ `ë‹¨ì¼ ì§„ì‹¤ ê³µê¸‰ì›`ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

## 2.2 Delete To Do

```ts
// ë°”ë‹ë¼ jsì—ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ dom parentNode ì ‘ê·¼í•˜ê¸°
// buttoníƒœê·¸ì— clickì´ë²¤íŠ¸ ì²˜ë¦¬
const deleteTodo = (e: MouseEvent) => {
    // vanillaì—ì„œ ì²˜ë¦¬ ë°©ë²•
    const target = e.target as Element;
    const parent = target.parentNode as Element;
    const id = parent.id as string;
    store.dispatch(removeTodo(+id));
};
```

### ğŸ”¹actionCreator

dispatchì—ì„œ ì‚¬ìš©ë  actionì˜ objectì˜ ì‚¬ìš©ê°’ì„ ì „ë‹¬í•˜ëŠ” í•¨ìˆ˜
dispatchì— ì§ì ‘ ë„£ê¸°ë³´ë‹¨ ë°–ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ê³  dispatchì—ì„œ ì‚¬ìš©í•œë‹¤.

\*\*\* íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‘ì„±í•˜ëŠ”ê²Œ ë„ˆë¬´ ì˜¤ë˜ê±¸ë¦°ë‹¤... ã… ã… ã… 

## 2.3 Delete To Do part Two

spliceì™€ ê°™ì€ mutateë¥¼ ì¼ìœ¼í‚¤ëŠ” ë©”ì†Œë“œê°€ ì•„ë‹Œ ìƒˆë¡œìš´ ë°°ì—´ì„ ì‘ì„±í•´ì£¼ëŠ” filterë¥¼ í†µí•´ ë¶ˆë³€ì„±ì„ ì§€í‚¤ê³  return ì‹œì¼œì„œ ì‚­ì œ ê¸°ëŠ¥ì„ ì‘ì„±í•˜ì˜€ë‹¤.

## 3.0 setup

`npm install react-redux`
`npm install react-router-dom`

### react-router-dom v6ì´ìƒ ë³€í™”

Routesì•ˆì— Routeë“¤ì´ ë‹´ê²¨ì•¼ í•œë‹¤.
components propsê°€ ì‚¬ë¼ì§€ê³  elementì— ì»´í¬ë„ŒíŠ¸ë¥¼ ë„£ëŠ”ë‹¤.
`<Route path="/" element={<Home />}></Route>`

## 3.1 Connecting the Store

-   `action`ì„ ì‘ì„±í•œë‹¤. const, ëŒ€ë¬¸ì ì¡°í•©
-   `actionCreator`ë¥¼ ì‘ì„±í•œë‹¤
-   `reducer`ë¥¼ ì‘ì„±í•œë‹¤
-   `store`ì— `reducer`ë¥¼ ë“±ë¡í•œë‹¤.
-   `react-redux`ì˜ Providerë¥¼ í†µí•´ `store`ë¥¼ í˜¸ì¶œí•˜ê³  ê°ì‹¸ì¤€ë‹¤.

## 3.2 mapStateToProps

ë“±ë¡ ì²˜ë¦¬ê°€ ëë‚¬ìœ¼ë‹ˆ reduxë¡œë¶€í„° stateì˜ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì–´ì•¼í•œë‹¤.
`connect`: ì»´í¬ë„ŒíŠ¸ë“¤ì—ê²Œ `store`ë¥¼ ì—°ê²°ì‹œì¼œì¤€ë‹¤. 2ê°œ(`state`, `dispatch`)ì˜ ì¸ìë¥¼ ê°€ì§„ë‹¤.
(
ì…ë ¥(ì €ì¥, ì‚­ì œ ë“±): ì €ì¥í•˜ëŠ” í–‰ìœ„ store.dispatchë¡œ reducerë¥¼ ë™ì‘ì‹œí‚¤ê¸°
ì½ê¸°: storeì— ë“±ë¡ëœ stateë¥¼ ê°€ì ¸ì˜¤ëŠ” í–‰ìœ„ store.getState()
)
ì°¸ê³ ë¡œ connectì˜ ë‚´ë¶€ëŠ” es6 curryingë¬¸ë²•ì„ í™œìš©í•´ì„œ ì €ë ‡ê²Œ ê¸°ê´´í•˜ê²Œ ìƒê¸´ ëª¨ìŠµì´ ëœë“¯í•˜ë‹¤.

`mapStateToProps`: í•¨ìˆ˜ì´ë©° ë‘ê°œì˜ ì¸ìë¥¼ ê°€ì§„ë‹¤. ì²«ë²ˆì§¸ëŠ” stateì´ê³ , redux storeì˜ stateì´ë‹¤. 2ë²ˆì§¸ëŠ” componentsì˜ propsì´ë‹¤.
